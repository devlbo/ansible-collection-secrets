---
# devlbo.secrets - Provision passwords
#
# Generates passwords and password hashes for a list of users,
# then encrypts them into per-user SOPS YAML files using age keys.
#
# No passwords are generated if `passwords__users` list is empty.
#
# Usage:
#   # Minimal â€” uses .sops.yaml config for age keys
#   ansible-playbook devlbo.secrets.provision_passwords
#
#   # With age keys and custom users
#   ansible-playbook devlbo.secrets.provision_passwords \
#     -e @vars/my_users.yml
#
#   # Overwrite existing files
#   ansible-playbook devlbo.secrets.provision_passwords \
#     -e passwords__overwrite=true

- name: Provision passwords
  hosts: localhost
  connection: local
  gather_facts: false

  roles:
    - role: devlbo.secrets.passwords
